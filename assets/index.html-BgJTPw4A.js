import{_ as s,c as a,e,o as t}from"./app-CGJJd-cj.js";const n={};function l(h,i){return t(),a("div",null,i[0]||(i[0]=[e(`<h2 id="_1-wsl2-配置" tabindex="-1"><a class="header-anchor" href="#_1-wsl2-配置"><span>1 WSL2 配置</span></a></h2><h3 id="_1-1-wsl-开启" tabindex="-1"><a class="header-anchor" href="#_1-1-wsl-开启"><span>1.1 WSL 开启</span></a></h3><p>运行管理员运行 PowerShell ，直接运行下面命令即可（默认WSL2），然后重启就应该<strong>自动开启</strong>了如“适用于Linux的Windows子系统”等相关功能</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">wsl</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --install</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p>此命令将启用运行 WSL 和安装 Linux 的 Ubuntu 发行版（在C盘）所需的功能。但是，C盘空间太紧张，我更愿意把其安装在其他盘（D盘）</p></blockquote><p>检查：在 Windows 功能中有开启“Hyper-V”、“适用于Linux的Windows子系统”、“虚拟机平台”功能</p><img src="https://raw.githubusercontent.com/PLUS-WAVE/blog-image/master/img/blog/2024-06-06/image-20240606094300567.png" alt="image-20240606094300567" style="zoom:50%;"><p>但是！windows家庭版（windows home）是默认没有Hyper-V功能的，需要自己手动安装：</p><p>Hyper-V的前提是启用了虚拟化功能（任务管理器中查看）：如果没有开启需要到BIOS中去设置</p><img src="https://raw.githubusercontent.com/PLUS-WAVE/blog-image/master/img/blog/2024-06-04/image-20240604162822074.png" alt="image-20240604162822074" style="zoom:33%;"><p>创建一个记事本，输入以下内容，再将记事本改后缀为<code>.bat</code>，运行等待5到10分钟即可开启Hyper-V功能</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">pushd </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">%~dp0</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">dir</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /b</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> %SystemRoot%</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">\\s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">ervicing</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">\\P</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">ackages</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">\\*</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Hyper-V</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">*</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.mum</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">hyper-v.txt</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">for</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> /f %%i in </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">&#39;findstr /i . hyper-v.txt 2^&gt;nul&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> do</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> dism /online /norestart /add-package:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">%SystemRoot%\\servicing\\Packages\\%%i</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">del</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hyper-v.txt</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Dism</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /online</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /enable-feature</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /featurename:Microsoft-Hyper-V-All</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /LimitAccess</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /ALL</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">pause</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-2-wsl-安装" tabindex="-1"><a class="header-anchor" href="#_1-2-wsl-安装"><span>1.2 WSL 安装</span></a></h3><p>注意：如果<strong>手动开启</strong>上面的“适用于Linux的Windows子系统”功能可能会自动安装WSL，此时应该没有安装Linux系统，还有可能是WSL1而不是2，所以保险起见运行以下命令进行更新：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">wsl</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --update</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_1-2-1-卸载c盘的-ubuntu" tabindex="-1"><a class="header-anchor" href="#_1-2-1-卸载c盘的-ubuntu"><span>1.2.1 卸载C盘的 Ubuntu</span></a></h4><p>卸载 WSL步骤操作：</p><ol><li><p>打开 PowerShell 并输入以下命令以查看已安装的 WSL 版本：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">wsl</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --list</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>如果还没有安装任何发行版，就不用卸载了</p></li><li><p>找到要卸载的发行版名称（Ubuntu）</p></li><li><p>输入以下命令以卸载该发行版：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">wsl</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --unregister</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Ubuntu</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ol><p>这样即可卸载C盘的 Ubuntu。</p><h4 id="_1-2-2-下载发行版" tabindex="-1"><a class="header-anchor" href="#_1-2-2-下载发行版"><span>1.2.2 下载发行版</span></a></h4><p>在这个网站下载想要的发行版包：<a href="https://learn.microsoft.com/zh-cn/windows/wsl/install-manual#downloading-distributions" target="_blank" rel="noopener noreferrer">https://learn.microsoft.com/zh-cn/windows/wsl/install-manual#downloading-distributions</a></p><p>可以选择任意版本进行下载。以下以下载 Ubuntu 为例：</p><ol><li><p>下载完成后，将获得一个后缀名为 <code>.AppxBundle</code> 的文件。</p><p><img src="https://raw.githubusercontent.com/PLUS-WAVE/blog-image/master/img/blog/2024-06-04/image-20240604192202197.png" alt="" loading="lazy"></p></li><li><p>将该文件的后缀改为 <code>.zip</code> 并解压。</p></li><li><p>在解压后的文件夹中，将找到 <code>Ubuntu_2204.1.7.0_x64.appx</code> 的文件。</p><p><img src="https://raw.githubusercontent.com/PLUS-WAVE/blog-image/master/img/blog/2024-06-04/image-20240604192255976.png" alt="" loading="lazy"></p></li><li><p>将该文件的后缀改为 <code>.zip</code> 并再次解压。</p></li><li><p>将解压后的文件夹<strong>移动到想要安装的路径中</strong>。</p></li><li><p>在解压后的文件夹中，将找到 <code>ubuntu.exe</code> 文件。</p><p><img src="https://raw.githubusercontent.com/PLUS-WAVE/blog-image/master/img/blog/2024-06-04/image-20240604192341461.png" alt="" loading="lazy"></p></li><li><p>双击该文件以运行安装程序</p></li><li><p>等待安装完成。安装完成后，就可以设置用户名和密码。</p></li></ol><p>安装成功后，会在安装文件夹中看到一个名为 <code>ext4.vhdx</code> 的镜像文件。Linux 生成的所有文件都默认存储在之前自定义的路径下的这个镜像文件中。</p><h3 id="_1-3-wsl-代理设置" tabindex="-1"><a class="header-anchor" href="#_1-3-wsl-代理设置"><span>1.3 WSL 代理设置</span></a></h3><p><code>C:\\Users\\你的用户名</code> 中创建一个 <code>.wslconfig</code> 文件，输入以下内容保存：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">wsl2</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">networkingMode</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">mirrored</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">autoProxy</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">true</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后 <code>wsl –shutdown</code> ，重启 WSL 即可。mirrored 模式与 WSL1 一样，宿主机和 WSL 网络互通，可以直接使用 Windows 的代理设置。</p><h2 id="_2-基础环境配置" tabindex="-1"><a class="header-anchor" href="#_2-基础环境配置"><span>2 基础环境配置</span></a></h2><p><strong>基础的环境应用安装</strong>：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt‐get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> update</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 更新</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt-get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> build-essential</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 安装基础环境</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt-get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cmake</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 安装cmake</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>WSL2 CUDA安装</strong>：<a href="https://developer.nvidia.com/cuda-toolkit-archive" target="_blank" rel="noopener noreferrer">https://developer.nvidia.com/cuda-toolkit-archive</a> 中选择CUDA Toolkit 12.1.1 版本命令行直接安装：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">wget</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> https://developer.download.nvidia.com/compute/cuda/12.1.1/local_installers/cuda_12.1.1_530.30.02_linux.run</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sh</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cuda_12.1.1_530.30.02_linux.run</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>WSL2 显卡驱动直接用的 windows 的，只需要安装CUDA Toolkit就可。</p><p>安装完成后确保 <code>~/.bashrc</code> 中有：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">export</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> PATH</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/usr/local/cuda-12.1/bin:$PATH</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">export</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> LD_LIBRARY_PATH</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/usr/local/cuda-12.1/lib64:$LD_LIBRARY_PATH</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">export</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> CUDA_HOME</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/usr/local/cuda-12.1</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>运行 <code>nvcc –version</code> 查看版本</p>`,37)]))}const p=s(n,[["render",l]]),d=JSON.parse(`{"path":"/article/cnv1q9wx/","title":"Windows家庭版 WSL2非C盘详细安装配置与WSL代理设置+WSL基础环境CUDA安装","lang":"zh-CN","frontmatter":{"title":"Windows家庭版 WSL2非C盘详细安装配置与WSL代理设置+WSL基础环境CUDA安装","tags":["Skills","Windows","WSL","CUDA"],"createTime":"2024/06/04 20:33:15","permalink":"/article/cnv1q9wx/","description":"1 WSL2 配置 1.1 WSL 开启 运行管理员运行 PowerShell ，直接运行下面命令即可（默认WSL2），然后重启就应该自动开启了如“适用于Linux的Windows子系统”等相关功能 此命令将启用运行 WSL 和安装 Linux 的 Ubuntu 发行版（在C盘）所需的功能。但是，C盘空间太紧张，我更愿意把其安装在其他盘（D盘） 检查：...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Windows家庭版 WSL2非C盘详细安装配置与WSL代理设置+WSL基础环境CUDA安装\\",\\"image\\":[\\"https://raw.githubusercontent.com/PLUS-WAVE/blog-image/master/img/blog/2024-06-04/image-20240604192202197.png\\",\\"https://raw.githubusercontent.com/PLUS-WAVE/blog-image/master/img/blog/2024-06-04/image-20240604192255976.png\\",\\"https://raw.githubusercontent.com/PLUS-WAVE/blog-image/master/img/blog/2024-06-04/image-20240604192341461.png\\"],\\"dateModified\\":\\"2024-11-24T01:33:30.000Z\\",\\"author\\":[]}"],["meta",{"property":"og:url","content":"https://plus-wave.github.io/article/cnv1q9wx/"}],["meta",{"property":"og:site_name","content":"PLUS-WAVE's Blog"}],["meta",{"property":"og:title","content":"Windows家庭版 WSL2非C盘详细安装配置与WSL代理设置+WSL基础环境CUDA安装"}],["meta",{"property":"og:description","content":"1 WSL2 配置 1.1 WSL 开启 运行管理员运行 PowerShell ，直接运行下面命令即可（默认WSL2），然后重启就应该自动开启了如“适用于Linux的Windows子系统”等相关功能 此命令将启用运行 WSL 和安装 Linux 的 Ubuntu 发行版（在C盘）所需的功能。但是，C盘空间太紧张，我更愿意把其安装在其他盘（D盘） 检查：..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://raw.githubusercontent.com/PLUS-WAVE/blog-image/master/img/blog/2024-06-04/image-20240604192202197.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-11-24T01:33:30.000Z"}],["meta",{"property":"article:tag","content":"CUDA"}],["meta",{"property":"article:tag","content":"WSL"}],["meta",{"property":"article:tag","content":"Windows"}],["meta",{"property":"article:tag","content":"Skills"}],["meta",{"property":"article:modified_time","content":"2024-11-24T01:33:30.000Z"}]]},"readingTime":{"minutes":3.33,"words":1000},"git":{"updatedTime":1732412010000,"contributors":[{"name":"PLUS_WAVE","username":"","email":"wangplus_wave@foxmail.com","commits":2,"avatar":"https://gravatar.com/avatar/73d9cce6b7473bc4e3bccd9c674dc373250f563551d205366d1b3852d719f74e?d=retro"}]},"autoDesc":true,"filePathRelative":"1. Tools & Skills/3. WSL.md","headers":[],"categoryList":[{"id":"873c88","sort":1,"name":" Tools & Skills"}]}`);export{p as comp,d as data};
