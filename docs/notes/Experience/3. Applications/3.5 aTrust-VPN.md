---
title: 3.5 aTrust VPN
createTime: 2025/05/31 17:46:55
permalink: /experience/g3tsy2a5/
---

==å…¨ç¨‹åŸºäº MacOS å’Œ Clash Verge v2.2.3==

ç”±äº ZJU RVPN å‡çº§äº†ï¼Œä¹‹å‰çš„ Easy Connectï¼ˆæ˜¯ä¸€å¨ğŸ’©ï¼‰åœç”¨äº†ä¸€å †åè®®æ¯”å¦‚é‡è¦çš„ SSHï¼Œæ”¹ä¸ºäº†åŒæ ·å‡ºè‡ªæ·±ä¿¡æœçš„ aTrustï¼ˆè¿˜æ˜¯ä¸€å¨ğŸ’©ï¼‰ï¼›ä¹‹å‰ç”¨ Easy Connect æœ‰äººåšé€†å‘å¼€å‘äº† zju connect å°±å¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯è²Œä¼¼ aTrust è¿˜æ²¡æœ‰è¿™ç§æœåŠ¡ï¼Œç›®å‰çš„æ–¹æ¡ˆæ˜¯**æ”¾åœ¨ docker é‡Œé¢ç„¶å clash åˆ†æµ**ï¼›

## 3.5.1 å®‰è£… docker

å®‰è£… docker & æ‹‰å– aTrust Docker é•œåƒï¼š

```bash
brew install --cask --appdir=/Applications docker
docker pull hagb/docker-atrust:latest
```

è¿è¡Œï¼š

```bash
docker run --restart unless-stopped --device /dev/net/tun --cap-add NET_ADMIN -ti -e PASSWORD=1234 -e URLWIN=1 -v $HOME/.atrust-data:/root -p 127.0.0.1:5901:5901 -p 127.0.0.1:1080:1080 -p 127.0.0.1:8888:8888 -p 127.0.0.1:54631:54631 --sysctl net.ipv4.conf.default.route_localnet=1 hagb/docker-atrust
```

## 3.5.2 aTrust è¿æ¥

åœ¨ MacOS è‡ªå¸¦çš„å±å¹•å…±äº«ä¸­è¿æ¥ dockerï¼Œç‚¹å‡»å³ä¸Šè§’çš„â€œ+â€ï¼Œç„¶åè¾“å…¥ `127.0.0.1:5901` è¿æ¥å³å¯ï¼šå¯†ç å°±æ˜¯åˆšåˆš docker å‘½ä»¤ä¸­è®¾ç½®çš„ `1234`

<img src="https://raw.githubusercontent.com/PLUS-WAVE/blog-image/master/img/blog/2025-05-31/image-20250531164006464.png" alt="image-20250531164006464" style="zoom: 42%;" />

è¿™é‡Œ Connection Options åœ°å€å¡«  `https://vpn.zju.edu.cn` ï¼ˆå¦‚æœå¼¹å‡ºä»€ä¹ˆæ›´æ–°/ Update ä¹‹ç±»çš„è·³è¿‡å°±è¡Œäº†ï¼‰

<img src="https://raw.githubusercontent.com/PLUS-WAVE/blog-image/master/img/blog/2025-05-31/image-20250531164423225.png" alt="image-20250531164423225" style="zoom: 43%;" />

ç„¶åå¡«å…¥ rvpn è´¦å·å¯†ç ï¼šç¬¬ä¸€æ¬¡ç™»é™†éœ€è¦æ‰‹æœºéªŒè¯ç 

<img src="https://raw.githubusercontent.com/PLUS-WAVE/blog-image/master/img/blog/2025-05-31/image-20250531164314306.png" alt="image-20250531164314306" style="zoom:33%;" />

ç„¶åå°±ç»“æŸäº†ï¼Œå°±ç®—åƒè¿™æ ·æ˜¾ç¤º Network unavailable ä¹Ÿæ˜¯æ²¡æœ‰é—®é¢˜ï¼Œ**ä¸ç”¨ç®¡**ï¼š

<img src="https://raw.githubusercontent.com/PLUS-WAVE/blog-image/master/img/blog/2025-05-31/image-20250531164759364.png" alt="image-20250531164759364" style="zoom:33%;" />

## 3.5.3 Clash Verge åˆ†æµ

ç°åœ¨æ–°ç‰ˆçš„ clash verge è¦åœ¨å…¨å±€æ‰©å±•è„šæœ¬é‡Œé¢è¿›è¡Œç¼–è¾‘ï¼š

<img src="https://raw.githubusercontent.com/PLUS-WAVE/blog-image/master/img/blog/2025-05-31/image-20250531165336356.png" alt="image-20250531165336356" style="zoom:33%;" />

ç›´æ¥æ›¿æ¢ä¸ºå¦‚ä¸‹å†…å®¹ï¼š

```javascript
const prependRule = [
  "DOMAIN-SUFFIX,cc98.org,ZJU,no-resolve",
  "DOMAIN-KEYWORD,zju,ZJU,no-resolve",
  "IP-CIDR,10.0.0.0/8,ZJU,no-resolve", // æ ¡å†…ip
];

const prependProxy = [
  {
    name: 'ZJU',
    type: 'socks5',
    server: '127.0.0.1',
    port: 1080
  },
];

function main(config) {
  // åˆå¹¶è§„åˆ™
  const oldRules = config["rules"] || [];
  config["rules"] = prependRule.concat(oldRules);

  // åˆå¹¶ä»£ç†èŠ‚ç‚¹
  const oldProxies = config["proxies"] || [];
  config["proxies"] = prependProxy.concat(oldProxies);

  return config;
}
```

ç„¶åç‚¹å‡»å³ä¸Šè§’çš„ ğŸ”¥ æ›´æ–°å³å¯ï¼Œæˆ–è€…é‡å¯ Clash Vergeï¼ˆæœ‰æ—¶å€™å¦‚æœè„šæœ¬å†™å¾—æœ‰é—®é¢˜ï¼Œéœ€è¦é‡å¯ä»–æ‰ä¼šæŠ¥é”™ï¼‰

å‚è€ƒï¼š

- [https://github.com/docker-easyconnect/docker-easyconnect](https://github.com/docker-easyconnect/docker-easyconnect)
- [https://www.cc98.org/topic/6172600](https://www.cc98.org/topic/6172600)

